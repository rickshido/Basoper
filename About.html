<!DOCTYPE html>
<html lang="pt">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title class="trn">Batch Simulator</title>

	<!-- Bootstrap -->
	<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
	<link href="View/starter-template.css" rel="stylesheet">
</head>

<body>
	
	<!-- NAVIGATION BAR -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
			</div>

			<div id="navbar" class="collapse navbar-collapse">
				<img class="pull-left" src="imgs/basoper_logo.png" width="18%" height="18%"/>
				<img class="pull-right margin-top-8" src="imgs/icmc_logo.png" width="7%" height="7%"/>

				<ul class="nav navbar-nav">
					<li><a href="index.html" class="trn" >Home</a></li>
					<li><a id="bla" href="Watch.html" class="trn">Watch instructions</a></li>
					<li class="active"><a id="bla" href="About.html" class="trn">About</a></li>
					<li><a href="contact.html" class="trn">Contact</a></li>
				</ul>
				<ul class="pull-right margin-top-5">
					<a href="#" class="trn lang_selector pull-right margin-right-10" data-value="pt"><img src="imgs/pt.png" /></a>
					<a href="#" class="trn lang_selector " data-value="en"><img src="imgs/en.png" /></a>
					<a href="#" class="trn lang_selector margin-right-3" data-value="es"><img src="imgs/es.png" /></a>
				</ul>
			</div>
		</div>
	</nav>
	<!-- NAVIGATION BAR -->


	<div class="container-fluid">
		<div class="row-fluid">

			<div id="div_left" class="col-md-9">
				

				<div class="col-md-12 margin-bottom-15">
					<h3 class="trn">About BASOPER</h3>
				</div>

				<div id="using" class="row margin-left-15">
					<div id="whatis" class="col-md-8 margin-bottom-15">
						<b class="trn">What is a batch processing?</b><br/>
						<span class="trn">Batch processing is the execution of a list of jobs on a computer system without manual intervention.</span>
					</div>
				</div>

				<div id="using" class="row margin-left-15">
					<div id="objectives" class="col-md-9 margin-bottom-15">
						<b class="trn">Objectives:</b><br/>
						<ol class="margin-top-5">
							<il class="trn">- Assist the teaching batch systems scheduling algorithms;</il><br/>
							<il class="trn">- Promote the visualization of functional, structural, and performance aspects.</il>
						</ol>
					</div>
				</div>

				<div id="using" class="row margin-left-15">
					<div id="content" class="col-md-9 margin-bottom-15">
						<b class="trn">What BASOPER does?</b><br/>
						<ol class="margin-top-5">
							<il class="trn">- Simulate the execution of three scheduling algorithms of batch systems such as FCFS, SJF, and SRTN;</il><br/>
							<il class="trn">- Display to the student a timestep execution table in order to assist the interaction of the jobs and the execution, ready and blocked queues;</il><br/>
							<il class="trn">- Allow the student follow the execution of each instruction of a job and its performance parameters such as Waiting Time (WT) and Turnaround Time (TT).</il><br/>
						</ol>
					</div>
				</div>

				<div id="using" class="row margin-left-15">
					<div id="content" class="col-md-9 margin-bottom-15">
						<b class="trn">Considerations in performance computation</b><br/>
						<ol class="margin-top-5">
							<il class="trn">- When a process is blocked, the time spent with input and output is disregarded;</il><br/>
							<il class="trn">- When there is a block instruction and there is no process in ready queue, the block is counted as idle time;</il><br/>
							<il class="trn">- When there is a block instruction and there is another process in ready queue, the block is not counted as idle time.</il><br/>
						</ol>
					</div>
				</div>
			</div>
		</div>
	</div>	

	<!-- FOOTER BAR -->
	<nav class="navbar navbar-inverse navbar-fixed-bottom gray">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
			</div>

			<div id="navbar" class="collapse navbar-collapse">
				<img src="imgs/bootstrap.png" class="margin-top-15 margin-right-15 pull-right" width="7%" height="7%" />
				<img src="imgs/jquery.png"  class="margin-top-15 margin-right-15 pull-right" width="7%" height="7%" />
				<img src="imgs/typescript.png"  class="margin-top-15 margin-right-15 pull-right" width="7%" height="7%" />
				<img src="imgs/powered.png"  class="margin-right-10 pull-right" width="7%" height="7%" />

			</div>
		</div>
	</nav>
	<!-- FOOTER BAR -->

		<script src="View/jquery.min.js"></script>

		<!-- Início - Necessário para a tradução -->
		<script src="View/jquery.translate.js"></script>
		<script type="text/javascript" src="View/dict.js"></script>
		<!-- Fim - Necessário para a tradução -->

		<script src="View/bootstrap.min.js"></script>
		<script type="text/javascript" src="Controller/Controller.js"></script>
		<script type="text/javascript" src="Model/Job.js"></script>
		<script type="text/javascript" src="Model/FCFS.js"></script>
		<script type="text/javascript" src="Model/SJF.js"></script>
		<script type="text/javascript" src="Model/SRTN.js"></script>

		<script>
			var running = false;
			var controller = new Controller()

			$("#btn_forward").hide()
			$("#btn_stop").hide()
			$("#btn_start").hide()

			$("#div_executinQueue").addClass("hide")
			$("#div_statistics").addClass("hide")
			$("#div_legend").addClass("hide")
			$("#div_executionTime").addClass("hide")


			$("#div_sjf").popover();
			$("#div_srtn").popover();
			$("#div_fcfs").popover();


			$("#btn_new_experiment").click(function() {

				location.reload()
			
			})

			$("#btn_new_experiment2").click(function() {

				location.reload()
			
			})


			$("#btn_add").click(function() {

								$("#btn_start").show()

								var job_id = controller.getJID()
								var arrival_time = $("#txtArrival").val()
								var instructions = $("#txtInstructions").val()

								
								if (!arrival_time || !instructions || arrival_time < 0 || instructions <= 0)
									return
								

								if (!controller.addJob(arrival_time, instructions)) //adiciona o Job do motor
									return


								$("#tbody_trace").append(
												"<tr id='row_job_id_" + job_id + "'  align='center'>" + 
												"<td>" + job_id	+ "</td>" + 
												"<td>" + arrival_time + " </td>" + 
												"<td>" + instructions + " </td>" + 
												"<td> <button type='button' class='btn btn-default' aria-label='Left Align' id='" + job_id + "' onClick='removeRow(this.id)'><span class='glyphicon glyphicon-remove' aria-hidden='true'></span></button>  </td> </tr>")

								$("#txtArrival").val("")
								$("#txtInstructions").val("")
								$("#txtArrival").focus()

							})

			$("#btn_stop").click(function() {

				if(!running){
					$("#btn_stop").val('Stop')
					$("#btn_stop").removeClass('btn-success')
					$("#btn_stop").addClass('btn-danger')
				}

				else{
					$("#btn_stop").val('Play')
					$("#btn_stop").removeClass('btn-danger')
					$("#btn_stop").addClass('btn-success')
				}

				running = !running;

				function play () {
					if (running) {
						$("#btn_forward").click();
						setTimeout(play, 2000);
					}
				}

				play();
			})


			function removeRow(this_id) {

				controller.removeJob(this_id)//remove o Job do motor
				$('#row_job_id_' + this_id).remove()
			
			}


			$("#btn_start").click(function() {

				$("#btn_forward").show()
				$("#btn_stop").show()
				$("#btn_start").hide()

				$("#div_algorithmForm").addClass("hide")
				$("#tb_input").addClass("hide")

				$("#div_executinQueue").removeClass("hide")
				$("#div_statistics").removeClass("hide")
				$("#div_legend").removeClass("hide")
				$("#div_executionTime").removeClass("hide")

				$("#div_left").addClass("col-md-8")
				$("#div_right").addClass("col-md-4")
				$("#div_left").removeClass("col-md-4")
				$("#div_right").removeClass("col-md-8")


				var algorithmSelected = $('input[name=type]:checked', '#algorithmForm').val()

				if (algorithmSelected == "FCFS") { controller.setAlgorithm(0) }
				else if (algorithmSelected == "SJF") { controller.setAlgorithm(1) }
				else if (algorithmSelected == "SRTN") {	controller.setAlgorithm(2) }

				controller.updateExecQueue()

			})

			$("#btn_forward").click(function() {

				$("#btn_backward").removeClass("disabled")
				controller.nextExecStep()

			})


			$("#btn_randomGen").click(function() {

				$("#btn_start").show()

				var jobs = controller.generateRandomSimulation()

				for ( var job in jobs) {

					$("#tbody_trace").append(
									"<tr id='row_job_id_" + jobs[job].getJID() + "'  align='center'>" + 
									" <td> " + jobs[job].getJID() + "</td>"    + 
									" <td> " + jobs[job].getArrivalTime()      + " </td>" + 
									" <td> " + jobs[job].getInstructions()     + " </td>" + 
									" <td> <button type='button' class='btn btn-default' aria-label='Left Align' id='" + jobs[job].getJID() + "' onClick='removeRow(this.id)'><span class='glyphicon glyphicon-remove' aria-hidden='true'></span></button> </td> </tr>")

				}
			})
		</script>
</body>
</html>